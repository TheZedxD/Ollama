<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ollama Chat Interface</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- Sidebar Toggle Button -->
        <button class="sidebar-toggle" id="sidebar-toggle" onclick="toggleSidebar()">
            <span id="toggle-icon">‹</span>
        </button>

        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h1>OLLAMA</h1>
                <p>Local AI Interface</p>
            </div>

            <div class="sidebar-section">
                <label for="model-select">Model</label>
                <select id="model-select">
                    <option value="llama3.2:3b">llama3.2:3b</option>
                </select>
                <div class="sidebar-tooltip">Select which AI model to use for responses. Different models have different capabilities and sizes.</div>
            </div>

            <div class="sidebar-section">
                <label for="ollama-url">Ollama URL</label>
                <input type="text" id="ollama-url" value="http://localhost:11434" placeholder="http://localhost:11434">
                <div class="sidebar-tooltip">The network address where Ollama is running. Use localhost for local, or an IP address for remote connections.</div>
            </div>

            <div class="sidebar-section">
                <label for="temperature">Temperature</label>
                <input type="number" id="temperature" value="0.7" min="0" max="2" step="0.1">
                <div class="sidebar-tooltip">Controls creativity and randomness. Lower values (0.1-0.5) make responses more focused and deterministic. Higher values (0.8-2.0) make them more creative and varied.</div>
            </div>

            <div class="sidebar-section">
                <label for="system-prompt">System Prompt</label>
                <input type="text" id="system-prompt" placeholder="You are a helpful assistant">
                <div class="sidebar-tooltip">Set the AI's behavior and personality. This instruction guides how the AI responds throughout the conversation.</div>
            </div>

            <button class="button" onclick="refreshModels()">Refresh Models</button>
            <button class="button button-secondary" onclick="clearChat()">Clear Chat</button>

            <div class="status-indicator">
                <div class="status-dot" id="status-dot"></div>
                <span id="status-text">Disconnected</span>
            </div>
        </div>

        <!-- Main Chat Area -->
        <div class="main-content">
            <div class="chat-header">
                <h2>CHAT INTERFACE</h2>
                <button class="theme-toggle" onclick="toggleTheme()">Light/Dark</button>
            </div>

            <div class="chat-messages" id="chat-messages">
                <div class="message assistant">
                    <div class="message-header">System</div>
                    <div class="message-content">
                        <p>Ollama Chat Interface initialized. Select a model and start chatting.</p>
                    </div>
                </div>
                <div class="message assistant">
                    <div class="message-header">AI</div>
                    <div class="message-content">
                        <p>Here's an example of how code is parsed and displayed:</p>
                        <div class="code-block">
                            <div class="code-header">
                                <span>python</span>
                                <button class="copy-button" onclick="copyCode(this)">Copy</button>
                            </div>
                            <pre><code>def fibonacci(n):
    if n <= 1:
        return n
    return fibonacci(n-1) + fibonacci(n-2)

# Calculate first 10 numbers
for i in range(10):
    print(f"F({i}) = {fibonacci(i)}")</code></pre>
                        </div>
                        <p>The code above shows a recursive Fibonacci implementation. You can also use inline code like <code>print("hello")</code> within regular text.</p>
                        <div class="code-block">
                            <div class="code-header">
                                <span>javascript</span>
                                <button class="copy-button" onclick="copyCode(this)">Copy</button>
                            </div>
                            <pre><code>const greeting = (name) => {
    return `Hello, ${name}!`;
};

console.log(greeting("World"));</code></pre>
                        </div>
                        <p>All code blocks automatically get syntax highlighting and a copy button for easy use.</p>
                    </div>
                </div>
            </div>

            <div class="chat-input-container">
                <!-- Tools Popup -->
                <div class="tools-popup" id="tools-popup">
                    <div class="tools-popup-header">
                        <h3>Tools & Settings</h3>
                        <button class="close-popup" onclick="toggleToolsPopup()">×</button>
                    </div>
                    <div class="tools-list">
                        <div class="tool-item" onclick="toggleTool('web-search')">
                            <div class="tool-checkbox" id="tool-web-search"></div>
                            <div class="tool-label">Web Search</div>
                            <div class="tool-tooltip">Enable web search capabilities</div>
                        </div>
                        <div class="tool-item" onclick="toggleTool('code-interpreter')">
                            <div class="tool-checkbox" id="tool-code-interpreter"></div>
                            <div class="tool-label">Code Interpreter</div>
                            <div class="tool-tooltip">Execute and test code</div>
                        </div>
                        <div class="tool-item" onclick="toggleTool('image-generation')">
                            <div class="tool-checkbox" id="tool-image-generation"></div>
                            <div class="tool-label">Image Generation</div>
                            <div class="tool-tooltip">Generate images from text</div>
                        </div>
                        <div class="tool-item" onclick="toggleTool('file-analysis')">
                            <div class="tool-checkbox" id="tool-file-analysis"></div>
                            <div class="tool-label">File Analysis</div>
                            <div class="tool-tooltip">Analyze uploaded files</div>
                        </div>
                        <div class="tool-item" onclick="toggleTool('memory')">
                            <div class="tool-checkbox" id="tool-memory"></div>
                            <div class="tool-label">Memory</div>
                            <div class="tool-tooltip">Remember context across chats</div>
                        </div>
                    </div>
                </div>

                <div class="typing-indicator" id="typing-indicator">AI is thinking...</div>
                <div class="chat-input-wrapper">
                    <button class="tools-button" onclick="toggleToolsPopup()">
                        +
                        <span class="tools-badge" id="tools-badge">0</span>
                    </button>
                    <textarea
                        class="chat-input"
                        id="chat-input"
                        placeholder="Type your message here..."
                        onkeydown="handleKeyPress(event)"></textarea>
                    <div class="thinking-animation" id="thinking-animation">
                        <div class="wifi-wave"></div>
                        <div class="wifi-wave"></div>
                        <div class="wifi-wave"></div>
                    </div>
                    <button class="send-button" id="send-button" onclick="sendMessage()">Send</button>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
